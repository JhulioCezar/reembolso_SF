<!DOCTYPE html>
<html lang="pt-BR">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
Â  <title>SolicitaÃ§Ã£o de Reembolso - Sem Fronteiras</title>
Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
Â  <style>
Â  Â  body { font-family: Arial, sans-serif; background-color: #f7f9fb; margin: 0; padding: 0; }
Â  Â  .container {
Â  Â  Â  Â  width: 800px;
Â  Â  Â  Â  background-color: #fff;
Â  Â  Â  Â  margin: 40px auto;
Â  Â  Â  Â  padding: 30px 50px;
Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  box-shadow: 0 0 10px rgba(0,0,0,0.1);
Â  Â  Â  Â  box-sizing: border-box;
Â  Â  }
Â  Â  .header { text-align: center; padding: 15px 0; }
Â  Â  .header img { max-height: 80px; width: auto; }
Â  Â  .titulo { text-align: center; background-color: #1c6ba0; color: white; font-weight: bold; padding: 10px; border-radius: 4px; margin: 25px 0 30px 0; font-size: 20px; }
Â  Â  label { font-weight: bold; }
Â  Â  input, textarea, select { width: 100%; padding: 6px; margin-top: 4px; margin-bottom: 12px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; background-color: #fff; }
Â  Â  table { width: 100%; border-collapse: collapse; margin-top: 15px; }
Â  Â  th, td { border: none; padding: 12px 8px; text-align: center; vertical-align: middle; border-bottom: 1px solid #eee; }
Â  Â  th { background-color: transparent; border-bottom: 2px solid #1c6ba0; font-weight: bold; }
Â  Â  .add-row { background-color: #0072bb; color: #fff; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; margin-top: 10px; }
Â  Â  .remove-row { color: red; cursor: pointer; font-weight: bold; user-select: none; }
Â  Â  .total { text-align: right; font-weight: bold; font-size: 1.1em; margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee; }
Â  Â  .comprovante-container { display: flex; align-items: center; margin-top: 30px; padding: 10px; border: 1px solid #ddd; border-radius: 6px; flex-wrap: wrap; }
Â  Â  .comprovante-actions { display: flex; align-items: center; }
Â  Â  .comprovante-actions strong { font-size: 1em; margin-right: 15px; }
Â  Â  .anexo-btn { background-color:#0072bb; color:white; border: none; padding: 8px 12px; font-size: 0.9em; border-radius:4px; cursor:pointer; margin: 0 5px; white-space: nowrap; }
Â  Â  #lista-comprovantes { display: flex; flex-wrap: wrap; gap: 8px; margin-left: 15px; align-items: center; }
Â  Â  .arquivo-item { background-color: #e9ecef; padding: 4px 8px; border-radius: 4px; font-size: 0.85em; display: flex; align-items: center; }
Â  Â  .remove-arquivo { margin-left: 8px; color: #d9534f; font-weight: bold; cursor: pointer; }
Â  Â  .assinaturas-container { display: flex; justify-content: space-around; align-items: flex-start; margin-top: 40px; gap: 30px; }
Â  Â  .assinatura-bloco { flex: 1; text-align: center; }
Â  Â  .assinatura { margin-top: 0; text-align: center; }
Â  Â  #signature-pad { border: 2px solid #ccc; border-radius: 6px; width: 100%; max-width: 300px; height: 120px; margin: 0 auto; background-color: #fafafa; cursor: crosshair; }
Â  Â  .assinatura-btns button { background-color: #0072bb; color: white; border: none; padding: 5px 10px; margin: 2px; border-radius: 4px; cursor: pointer; }
Â  Â  .assinatura-line { border-top: 1px solid #000; width: 100%; max-width: 300px; margin: 135px auto 0 auto; }
Â  Â  .btn-print { background-color: #5cb85c; color: white; }
Â  Â  .btn-secondary { background-color: #0072bb; color: white; margin-right: 10px; }
Â  Â  .btn-danger { background-color: #d9534f; color: white; }
Â  Â  .btn-print, .btn-secondary, .btn-danger { border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin-top: 20px; }
Â  Â  .pix-group { display: flex; gap: 15px; }
Â  Â  #camera-container, #print-only-content { display: none; }

Â  Â  .pdf-generation-mode .add-row,
Â  Â  .pdf-generation-mode .remove-row,
Â  Â  .pdf-generation-mode .comprovante-actions,
Â  Â  .pdf-generation-mode #lista-comprovantes,
Â  Â  .pdf-generation-mode .assinatura-btns,
Â  Â  .pdf-generation-mode .btn-print,
Â  Â  .pdf-generation-mode .btn-secondary,
Â  Â  .pdf-generation-mode .btn-danger,
Â  Â  .pdf-generation-mode .remove-arquivo {
Â  Â  Â  Â  display: none !important;
Â  Â  }

Â  Â  .pdf-generation-mode #tabelaDespesas input,
Â  Â  .pdf-generation-mode #supervisorNome {
Â  Â  Â  Â  border: none !important;
Â  Â  Â  Â  box-shadow: none !important;
Â  Â  Â  Â  background-color: transparent !important;
Â  Â  Â  Â  -webkit-appearance: none; /* Remove setas no Chrome/Safari */
Â  Â  Â  Â  margin: 0;
Â  Â  }
Â  Â Â 
Â  Â  .pdf-generation-mode input[type=number] {
Â  Â  Â  Â  -moz-appearance: textfield; /* Remove setas no Firefox */
Â  Â  }
Â  Â  @media print {
Â  Â  Â  Â  body { background: #fff; }
Â  Â  Â  Â  .container { box-shadow: none; margin: 0; width: auto; border-radius: 0; }
Â  Â  Â  Â  .add-row, .remove-row, .anexo-btn, .assinatura-btns, .btn-print, .btn-secondary, .btn-danger,
Â  Â  Â  Â  .comprovante-container, #camera-container { display: none !important; }
Â  Â  Â  Â  input, select, textarea { border: none !important; background-color: transparent !important; box-shadow: none !important; -webkit-appearance: none; -moz-appearance: none; appearance: none; }
Â  Â  Â  Â  #print-only-content { display: block !important; }
Â  Â  Â  Â  #tabelaDespesas input, #tabelaDespesas .remove-row { display: none !important; }
Â  Â  Â  Â  .print-value { display: block !important; font-size: 10pt; text-align: center; }
Â  Â  Â  Â  #tabelaDespesas { table-layout: fixed; width: 100%; border-collapse: collapse; }
Â  Â  Â  Â  #tabelaDespesas th, #tabelaDespesas td { border: none; border-bottom: 1px solid #ccc; padding: 8px; }
Â  Â  Â  Â  #tabelaDespesas th { border-bottom: 2px solid #000; }
Â  Â  Â  Â  .print-page { page-break-before: always; text-align: center; padding-top: 40px; }
Â  Â  Â  Â  .print-page img { max-width: 90%; max-height: 80vh; border: 1px solid #ccc; }
Â  Â  }
Â  </style>
</head>
<body>
Â  <div class="container">
Â  Â  <div class="header"> <img src="https://i.imgur.com/dvzRyus.png" alt="Sem Fronteiras Logo"> </div>
Â  Â  <div class="titulo">SolicitaÃ§Ã£o de Reembolso</div>
Â  Â  <label for="nomeSolicitante">Nome do solicitante:</label>
Â  Â  <input type="text" id="nomeSolicitante" placeholder="Digite o nome completo">
Â  Â  <p>Venho por meio deste solicitar o reembolso das despesas informadas abaixo:</p>
Â  Â  <table id="tabelaDespesas">
Â  Â  Â  <thead>
Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  <th style="width: 20%;">Data</th>
Â  Â  Â  Â  Â  <th style="width: 50%;">DescriÃ§Ã£o da Despesa</th>
Â  Â  Â  Â  Â  <th style="width: 25%;">Valor (R$)</th>
Â  Â  Â  Â  Â  <th style="width: 5%;"></th>
Â  Â  Â  Â  </tr>
Â  Â  Â  </thead>
Â  Â  Â  <tbody></tbody>
Â  Â  </table>
Â  Â  <button class="add-row" type="button" onclick="adicionarLinha()">+ Adicionar despesa</button>
Â  Â  <div class="total">Total a Reembolsar: R$ <span id="total">0,00</span></div>
Â  Â  <h3>Dados para transferÃªncia via Pix:</h3>
Â  Â  <div class="pix-group">
Â  Â  Â  Â  <div><label for="tipoPix">Tipo de Chave Pix:</label><select id="tipoPix" onchange="configurarInputPix()"><option value="cpf_cnpj">CPF/CNPJ</option><option value="celular">Celular (DD + NÃºmero)</option><option value="email">E-mail</option><option value="aleatoria">Chave AleatÃ³ria</option></select></div>
Â  Â  Â  Â  <div><label for="chavePixInput">Chave Pix:</label><input type="text" id="chavePixInput" placeholder="Digite o CPF ou CNPJ" /></div>
Â  Â  </div>

Â  Â  <div class="comprovante-container">
Â  Â  Â  <div class="comprovante-actions">
Â  Â  Â  Â  Â  <strong>Comprovantes:</strong>
Â  Â  Â  Â  Â  <button class="anexo-btn" onclick="adicionarComprovante('arquivo')">+ Adicionar Arquivo</button>
Â  Â  Â  Â  Â  <button class="anexo-btn" onclick="adicionarComprovante('camera')">ðŸ“· Tirar Foto</button>
Â  Â  Â  </div>
Â  Â  Â  <div id="lista-comprovantes"></div>
Â  Â  </div>

Â  Â  <div id="camera-container" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; padding: 20px; border: 2px solid #333; box-shadow: 0 0 15px rgba(0,0,0,0.5); z-index: 1000; text-align: center;">
Â  Â  Â  Â  <video id="camera" width="300" height="200" autoplay></video>
Â  Â  Â  Â  <button id="capturar-btn" class="anexo-btn" style="margin-top: 10px;">Capturar e Anexar</button>
Â  Â  Â  Â  <button onclick="fecharCamera()" class="anexo-btn" style="background-color: #d9534f;">Cancelar</button>
Â  Â  </div>

Â  Â  <div class="assinaturas-container">
Â  Â  Â  Â  <div class="assinatura-bloco">
Â  Â  Â  Â  Â  Â  <div class="assinatura">
Â  Â  Â  Â  Â  Â  Â  <p><strong>Assinatura Digital do Solicitante:</strong></p>
Â  Â  Â  Â  Â  Â  Â  <canvas id="signature-pad"></canvas>
Â  Â  Â  Â  Â  Â  Â  <div class="assinatura-btns">
Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onclick="limparAssinatura()">Limpar</button>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="assinatura-bloco">
Â  Â  Â  Â  Â  Â  <div class="assinatura">
Â  Â  Â  Â  Â  Â  Â  <div class="assinatura-line"></div>
Â  Â  Â  Â  Â  Â  Â  <input type="text" id="supervisorNome" placeholder="Nome do Supervisor por Extenso" style="display: block; width: 100%; max-width: 300px; margin: 8px auto 0 auto; text-align: center;" />
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div style="text-align:center;">
Â  Â  Â  <button class="btn-secondary" onclick="prepararEImprimir()">Imprimir</button>
Â  Â  Â  <button class="btn-print" onclick="gerarPDF()">Salvar em PDF</button>
Â  Â  Â  <button class="btn-danger" onclick="limparFormulario()">Limpar FormulÃ¡rio</button>
Â  Â  </div>

Â  Â  <div id="print-only-content"></div>
Â  </div>

Â  <script>
Â  Â  let signatureCanvas, signatureCtx, signatureDrawing = false;
Â  Â  let comprovantes = [];
Â  Â  const regexEmail = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
Â  Â  const hoje = new Date();
Â  Â  const dia = String(hoje.getDate()).padStart(2, '0');
Â  Â  const mes = String(hoje.getMonth() + 1).padStart(2, '0');
Â  Â  const ano = hoje.getFullYear();
Â  Â  const dataMaxima = `${ano}-${mes}-${dia}`;

Â  Â  function validarFormulario() {
Â  Â  Â  Â  const nome = document.getElementById("nomeSolicitante").value.trim();
Â  Â  Â  Â  if (nome === "") { alert("Por favor, preencha o nome do solicitante."); return false; }
Â  Â  Â  Â  let despesaInvalida = false;
Â  Â  Â  Â  document.querySelectorAll('#tabelaDespesas tbody tr').forEach((linha) => {
Â  Â  Â  Â  Â  Â  const data = linha.querySelector('input[type="date"]').value;
Â  Â  Â  Â  Â  Â  const descricao = linha.querySelector('input[type="text"]').value.trim();
Â  Â  Â  Â  Â  Â  const valor = linha.querySelector('input[type="number"]').value.trim();
Â  Â  Â  Â  Â  Â  if ((descricao !== '' || valor !== '') && data === '') { despesaInvalida = true; }
Â  Â  Â  Â  });
Â  Â  Â  Â  if (despesaInvalida) { alert("Por favor, preencha a data para todas as despesas informadas."); return false; }
Â  Â  Â  Â  const tipoPix = document.getElementById("tipoPix").value;
Â  Â  Â  Â  let pix = document.getElementById("chavePixInput").value.trim();
Â  Â  Â  Â  let isValidPix = true;
Â  Â  Â  Â  let mensagemErro = "";
Â  Â  Â  Â  if (tipoPix === 'cpf_cnpj' || tipoPix === 'celular') { pix = pix.replace(/[\.\-\/()\s]/g, ''); }
Â  Â  Â  Â  switch (tipoPix) {
Â  Â  Â  Â  Â  Â  case 'cpf_cnpj': if (pix.length !== 11 && pix.length !== 14) { isValidPix = false; mensagemErro = "O CPF deve ter 11 dÃ­gitos e o CNPJ 14."; } break;
Â  Â  Â  Â  Â  Â  case 'celular': if (pix.length < 10 || pix.length > 11) { isValidPix = false; mensagemErro = "O celular deve conter DDD e 8 ou 9 dÃ­gitos."; } break;
Â  Â  Â  Â  Â  Â  case 'email': if (!regexEmail.test(pix)) { isValidPix = false; mensagemErro = "O formato do E-mail estÃ¡ invÃ¡lido."; } break;
Â  Â  Â  Â  Â  Â  case 'aleatoria': if (pix.length === 0) { isValidPix = false; mensagemErro = "A Chave AleatÃ³ria nÃ£o pode ser vazia."; } break;
Â  Â  Â  Â  }
Â  Â  Â  Â  if (!isValidPix) { alert("Erro na Chave Pix: " + mensagemErro); return false; }
Â  Â  Â  Â  return true;
Â  Â  }
Â  Â Â 
Â  Â  function capitalizarNomeProprio(nome) { if (!nome) return ''; const excecoes = ['e', 'de', 'da', 'do', 'das', 'dos']; return nome.toLowerCase().split(' ').map((palavra, index) => { if (index > 0 && excecoes.includes(palavra)) { return palavra; } return palavra.charAt(0).toUpperCase() + palavra.slice(1); }).join(' '); }
Â  Â  async function gerarPDF() { if (!validarFormulario()) { return; } const formElement = document.querySelector(".container"); formElement.classList.add("pdf-generation-mode"); html2canvas(formElement, { scale: 2, useCORS: true }).then(canvas => { const imgData = canvas.toDataURL('image/png'); const { jsPDF } = window.jspdf; const pdf = new jsPDF('p', 'mm', 'a4'); const pdfWidth = pdf.internal.pageSize.getWidth(); const pageHeight = pdf.internal.pageSize.getHeight(); const imgHeight = canvas.height * pdfWidth / canvas.width; pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, imgHeight); comprovantes.forEach((comprovante, index) => { pdf.addPage(); const title = `Comprovante ${index + 1}`; const imgProps = pdf.getImageProperties(comprovante.src); const margin = 15; const maxWidth = pdfWidth - margin * 2; const maxHeight = pageHeight - margin * 2 - 20; const ratio = Math.min(maxWidth / imgProps.width, maxHeight / imgProps.height); const w = imgProps.width * ratio; const h = imgProps.height * ratio; const x = (pdfWidth - w) / 2; const y = (pageHeight - h) / 2 + 10; pdf.setFontSize(12); pdf.text(title, pdfWidth / 2, margin, { align: 'center' }); pdf.addImage(comprovante.src, 'PNG', x, y, w, h); }); const nome = document.getElementById("nomeSolicitante").value.trim(); pdf.save(`reembolso_${nome.replace(/\s+/g, '_')}.pdf`); formElement.classList.remove("pdf-generation-mode"); }); }
Â  Â  function prepararEImprimir() { if (!validarFormulario()) { return; } document.querySelectorAll('#tabelaDespesas tbody td').forEach(cell => { const input = cell.querySelector('input'); if (input) { let valor = input.type === 'date' && input.value ? input.value.split('-').reverse().join('/') : input.value; const span = document.createElement('span'); span.className = 'print-value'; span.textContent = valor; cell.appendChild(span); } }); const printContent = document.getElementById('print-only-content'); printContent.innerHTML = ''; comprovantes.forEach((comprovante, index) => { const page = document.createElement('div'); page.className = 'print-page'; const title = document.createElement('h2'); title.textContent = `Comprovante ${index + 1}`; const img = document.createElement('img'); img.src = comprovante.src; page.appendChild(title); page.appendChild(img); printContent.appendChild(page); }); setTimeout(window.print, 100); }
Â  Â  function adicionarComprovante(tipo) { if (tipo === 'arquivo') { const input = document.createElement('input'); input.type = 'file'; input.accept = 'image/jpeg,image/png'; input.onchange = e => { const file = e.target.files[0]; if (!file) return; const reader = new FileReader(); reader.onload = function(event) { comprovantes.push({ filename: file.name, src: event.target.result }); renderizarComprovantes(); }; reader.readAsDataURL(file); }; input.click(); } else if (tipo === 'camera') { abrirCamera(); } }
Â  Â  document.getElementById('capturar-btn').onclick = function() { const video = document.getElementById('camera'); const canvas = document.createElement('canvas'); canvas.width = video.videoWidth; canvas.height = video.videoHeight; canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height); const filename = `Foto_${new Date().toISOString()}.png`; comprovantes.push({ filename: filename, src: canvas.toDataURL('image/png') }); renderizarComprovantes(); fecharCamera(); };
Â  Â  function renderizarComprovantes() { const listaArea = document.getElementById('lista-comprovantes'); listaArea.innerHTML = ''; comprovantes.forEach((comprovante, index) => { const item = document.createElement('div'); item.className = 'arquivo-item'; const nomeArquivo = document.createElement('span'); nomeArquivo.textContent = comprovante.filename; const removeBtn = document.createElement('span'); removeBtn.className = 'remove-arquivo'; removeBtn.innerHTML = '&times;'; removeBtn.onclick = function() { removerComprovante(index); }; item.appendChild(nomeArquivo); item.appendChild(removeBtn); listaArea.appendChild(item); }); }
Â  Â  function removerComprovante(index) { comprovantes.splice(index, 1); renderizarComprovantes(); }
Â  Â  function limparFormulario() { if (confirm("Tem certeza de que deseja limpar todos os campos do formulÃ¡rio?")) { document.getElementById('nomeSolicitante').value = ''; document.getElementById('supervisorNome').value = ''; document.querySelector('#tabelaDespesas tbody').innerHTML = ''; adicionarLinha(); comprovantes = []; renderizarComprovantes(); document.getElementById('tipoPix').value = 'cpf_cnpj'; configurarInputPix(); limparAssinatura(); window.scrollTo({ top: 0, behavior: 'smooth' }); } }
Â  Â  function adicionarLinha() { const tabelaBody = document.getElementById("tabelaDespesas").getElementsByTagName("tbody")[0]; const novaLinha = document.createElement("tr"); novaLinha.innerHTML = `<td><input type="date" max="${dataMaxima}" /></td><td><input type="text" class="descricao-despesa" placeholder="Descreva a despesa" /></td><td><input type="number" class="valor" step="0.01" min="0" placeholder="0.00" /></td><td><span class="remove-row" title="Remover linha">âœ–</span></td>`; tabelaBody.appendChild(novaLinha); atualizarEventos(); }
Â  Â  function atualizarEventos() { document.querySelectorAll(".valor").forEach(input => { input.oninput = calcularTotal; input.onblur = function() { const valor = parseFloat(this.value); if (!isNaN(valor)) { this.value = valor.toFixed(2); } }; }); document.querySelectorAll(".remove-row").forEach(btn => { btn.onclick = function() { this.closest("tr").remove(); calcularTotal(); }; }); document.querySelectorAll(".descricao-despesa").forEach(input => { input.oninput = function() { this.value = this.value.split(' ').map(word => { return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase(); }).join(' '); }; }); calcularTotal(); }
Â  Â  function configurarInputPix() { const tipo = document.getElementById("tipoPix").value; const input = document.getElementById("chavePixInput"); input.oninput = null; input.value = ""; input.setAttribute("type", "text"); input.removeAttribute("maxlength"); switch (tipo) { case 'cpf_cnpj': input.setAttribute("placeholder", "Digite o CPF"); input.setAttribute("maxlength", "14"); input.oninput = function() { let value = this.value.replace(/\D/g, ''); if (value.length > 11) value = value.substring(0, 11); value = value.replace(/(\d{3})(\d)/, '$1.$2'); value = value.replace(/(\d{3})(\d)/, '$1.$2'); value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2'); this.value = value; }; break; case 'celular': input.setAttribute("placeholder", "Ex: (99) 98765-4321"); input.setAttribute("type", "tel"); break; case 'email': input.setAttribute("placeholder", "Ex: seu.email@dominio.com"); input.setAttribute("type", "email"); break; case 'aleatoria': input.setAttribute("placeholder", "Digite a chave"); break; } }
Â  Â  function abrirCamera() { document.getElementById("camera-container").style.display = "block"; navigator.mediaDevices.getUserMedia({ video: true }).then(stream => { document.getElementById("camera").srcObject = stream; }).catch(err => { alert("NÃ£o foi possÃ­vel acessar a cÃ¢mera: " + err); fecharCamera(); }); }
Â  Â  function fecharCamera() { const video = document.getElementById("camera"); if (video.srcObject) { video.srcObject.getTracks().forEach(track => track.stop()); } document.getElementById("camera-container").style.display = "none"; }
Â  Â  function calcularTotal() { let total = 0; document.querySelectorAll(".valor").forEach(input => { const val = parseFloat(input.value); if (!isNaN(val)) total += val; }); document.getElementById("total").textContent = total.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }); }
Â  Â  function setupSignature() { signatureCanvas = document.getElementById("signature-pad"); if (!signatureCanvas) return; signatureCtx = signatureCanvas.getContext("2d"); signatureDrawing = false; signatureCanvas.addEventListener("mousedown", e => { signatureDrawing = true; signatureCtx.beginPath(); signatureCtx.moveTo(e.offsetX, e.offsetY); }); signatureCanvas.addEventListener("mousemove", e => { if (signatureDrawing) { signatureCtx.lineTo(e.offsetX, e.offsetY); signatureCtx.stroke(); } }); signatureCanvas.addEventListener("mouseup", () => signatureDrawing = false); signatureCanvas.addEventListener("mouseleave", () => signatureDrawing = false); signatureCanvas.addEventListener("touchstart", e => { e.preventDefault(); const touch = e.touches[0]; signatureDrawing = true; signatureCtx.beginPath(); signatureCtx.moveTo(touch.clientX - signatureCanvas.getBoundingClientRect().left, touch.clientY - signatureCanvas.getBoundingClientRect().top); }); signatureCanvas.addEventListener("touchmove", e => { e.preventDefault(); if (signatureDrawing) { const touch = e.touches[0]; signatureCtx.lineTo(touch.clientX - signatureCanvas.getBoundingClientRect().left, touch.clientY - signatureCanvas.getBoundingClientRect().top); signatureCtx.stroke(); } }); signatureCanvas.addEventListener("touchend", () => signatureDrawing = false); }
Â  Â  function limparAssinatura() { if (signatureCtx && signatureCanvas) { signatureCtx.clearRect(0, 0, signatureCanvas.width, signatureCanvas.height); } }
Â  Â  window.onafterprint = function() { document.querySelectorAll('.print-value').forEach(span => span.remove()); document.getElementById('print-only-content').innerHTML = ''; }
Â  Â Â 
Â  Â  document.addEventListener("DOMContentLoaded", () => {
Â  Â  Â  adicionarLinha();
Â  Â  Â  setupSignature();
Â  Â  Â  configurarInputPix();
Â  Â  Â  const nomeSolicitanteInput = document.getElementById('nomeSolicitante');
Â  Â  Â  const supervisorNomeInput = document.getElementById('supervisorNome');
Â  Â  Â  nomeSolicitanteInput.addEventListener('input', function() { this.value = capitalizarNomeProprio(this.value); });
Â  Â  Â  supervisorNomeInput.addEventListener('input', function() { this.value = capitalizarNomeProprio(this.value); });
Â  Â  });
Â  </script>
</body>
</html>
